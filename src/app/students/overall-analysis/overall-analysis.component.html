<div class="main">
  <div>
    <div class="header row zero-padding ">
      <div class="heading col-12">
        Overall Analysis
      </div>
    </div>
    <div class="content row">
      <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 col-xl-3 padding-bottom option-panel">
       <div class="full-width option-div">
          <div class="options">
            <mat-form-field class="full-width option">
              <mat-label>Monthly Record</mat-label>
              <mat-select [formControl]="records">
                <mat-option *ngFor="let record of monthlyRecords" [value]="record">
                  {{record}}
                </mat-option>
              </mat-select>
              </mat-form-field>
            </div>
          <div class="options">
            <mat-form-field class="full-width option">
              <mat-label>Subject</mat-label>
              <mat-select [formControl]="allSubject">
                <mat-option *ngFor="let subject of subjects" [value]="subject">
                  {{subject}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="options">
            <mat-form-field class="full-width option">
              <mat-label>Chapter</mat-label>
              <mat-select [formControl]="chapter">
                <mat-option *ngFor="let chapter of chapters" [value]="chapter">
                  {{chapter}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="options">
            <mat-form-field class="full-width option">
              <mat-label>Question Type</mat-label>
              <mat-select [formControl]="question">
                <mat-option *ngFor="let type of questionType" [value]="type">
                  {{type}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </div>

      <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9 col-xl-9 zero-padding chart-container">
        <div class="chart"  style="display: block;">
          <canvas baseChart 
            [datasets]="barChartData"
            [labels]="barChartLabels"
            [options]="barChartOptions"
            [plugins]="barChartPlugins"
            [legend]="barChartLegend"
            [chartType]="barChartType">
          </canvas>
        </div>
        <div class="panel">
          <div><button (click)="prevData()" class="buttons" mat-raised-button>Previous</button></div>
          <div><button (click)="nextData()" class="buttons" mat-raised-button>Next</button></div>
        </div>
      </div>
    </div>
    <div class="table-container zero-padding row">
      <div class="table-data col-12">
         <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 my-table">
          <ng-container matColumnDef="testId">
            <th mat-header-cell *matHeaderCellDef> Test Id </th>
            <td mat-cell *matCellDef="let element"> {{element.testId}} </td>
          </ng-container>

          <ng-container matColumnDef="subject">
              <th mat-header-cell *matHeaderCellDef> Subject </th>
              <td mat-cell *matCellDef="let element"> {{element.subject}} </td>
          </ng-container>

          <ng-container matColumnDef="solvedDate">
              <th (click)="sortByRightOrWrong()"mat-header-cell *matHeaderCellDef> Solved Date 
                <i *ngIf="ascRightOrWrong"  class="fa fa-sort-alpha-asc"></i>
                <i *ngIf="!ascRightOrWrong" class="fa fa-sort-alpha-desc"></i>
              </th>
              <td mat-cell *matCellDef="let element"> {{element.solvedDate}} </td>
          </ng-container>

          <ng-container matColumnDef="percentage">
            <th mat-header-cell *matHeaderCellDef> Percentage </th>
            <td mat-cell *matCellDef="let element"> {{element.percentage}} </td>
          </ng-container>

          <ng-container matColumnDef="testType">
            <th mat-header-cell *matHeaderCellDef> Test Type </th>
            <td mat-cell *matCellDef="let element"> {{element.testType}} </td>
          </ng-container>

          <ng-container matColumnDef="patternName">
            <th mat-header-cell *matHeaderCellDef> Pattern Name </th>
            <td mat-cell *matCellDef="let element"> {{element.patternName}} </td>
          </ng-container>

          <ng-container matColumnDef="class">
            <th mat-header-cell *matHeaderCellDef> Class </th>
            <td mat-cell *matCellDef="let element"> {{element.class}} </td>
          </ng-container>  
          
          <tr class="table-heading" mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr class="table-data" mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>
    </div>
  </div>
</div>
